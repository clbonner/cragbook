var Cragbook={RouteList:function(t){this.all=t,this.view,this.discipline="all",this.sort=function(t){switch(t){case"name":this.view.sort(function(t,s){var e=t.name.toLowerCase(),i=s.name.toLowerCase();return i>e?-1:e>i?1:0});break;case"grade":var s,e,i,r;switch(this.discipline){case"all":s=this.getTradRoutes(this.all),e=this.getSportRoutes(this.all),i=this.getBoulderProblems(this.all),s=this.sortTradRoutes(s),e=this.sortSportRoutes(e),i=this.sortBoulderProblems(i),this.view=[];for(r in s)this.view.push(s[r]);for(r in e)this.view.push(e[r]);for(r in i)this.view.push(i[r]);return this.discipline="all",this.view;case"trad":return s=this.sortTradRoutes(this.view),this.view=s;case"sport":return e=this.sortSportRoutes(this.view),this.view=e;case"boulder":return i=this.sortBoulderProblems(this.view),this.view=i}break;case"stars":this.view.sort(function(t,s){return s.stars.length-t.stars.length});break;case"length":this.view.sort(function(t,s){return t.length-s.length});break;case"firstascent":this.view.sort(function(t,s){var e=t.firstascent.toLowerCase(),i=s.firstascent.toLowerCase();return i>e?-1:e>i?1:0});break;case"sector":this.view.sort(function(t,s){return t.orderid-s.orderid});break;case"crag":this.view.sort(function(t,s){var e=t.cragName.toLowerCase(),i=s.cragName.toLowerCase();return i>e?-1:e>i?1:0})}return this.view},this.getAllRoutes=function(){return this.view=this.all.slice(),this.discipline="all",this.view},this.getTradRoutes=function(){var t;this.view=[];for(t in this.all)1==this.all[t].discipline&&this.view.push(this.all[t]);return this.discipline="trad",this.view},this.getSportRoutes=function(){var t;this.view=[];for(t in this.all)(2==this.all[t].discipline||4==this.all[t].discipline)&&this.view.push(this.all[t]);return this.discipline="sport",this.view},this.getBoulderProblems=function(){var t;this.view=[];for(t in this.all)3==this.all[t].discipline&&this.view.push(this.all[t]);return this.discipline="boulder",this.view},this.sortTradRoutes=function(t){function s(t){return/^E$/.test(t)?t=0:/^M/.test(t)?t=1:/^D/.test(t)?t=2:/^HD/.test(t)?t=3:/^VD/.test(t)?t=4:/^HVD/.test(t)?t=5:/^MS/.test(t)?t=6:/^S/.test(t)?t=7:/^HS/.test(t)?t=8:/^MVS/.test(t)?t=9:/^VS/.test(t)?t=10:/^HVS/.test(t)?t=11:/^E1/.test(t)?t=12:/^E2/.test(t)?t=13:/^E3/.test(t)?t=14:/^E4/.test(t)?t=15:/^E5/.test(t)?t=16:/^E6/.test(t)?t=17:/^E7/.test(t)?t=18:/^E8/.test(t)?t=19:/^E9/.test(t)?t=20:/^E10/.test(t)?t=21:/^E11/.test(t)?t=22:/^MXS/.test(t)?t=23:/^XS/.test(t)?t=24:/^HXS/.test(t)&&(t=25),t}return t.sort(function(t,e){var i=t.grade.split(" "),r=e.grade.split(" ");return i[0]==r[0]?i[1]<r[1]?-1:i[1]>r[1]?1:0:(t=s(t.grade),e=s(e.grade),e>t?-1:t>e?1:0)}),t},this.sortSportRoutes=function(t){return t.sort(function(t,s){return t.grade<s.grade?-1:t.grade>s.grade?1:0}),t},this.sortBoulderProblems=function(t){return t.sort(function(t,s){return"VB"==t.grade?-1:"VB"==s.grade?1:t.grade<s.grade?-1:t.grade>s.grade?1:0}),t},this.gradeFilter=function(t){var s,e=[],i=new RegExp("^"+t);switch(this.discipline){case"trad":var r=this.getTradRoutes(this.all);r=this.sortTradRoutes(r),this.view=r;break;case"sport":var o=this.getSportRoutes(this.all);o=this.sortSportRoutes(o),this.view=o;break;case"boulder":var a=this.getBoulderProblems(this.all);a=this.sortBoulderProblems(a),this.view=a}for(s in this.view)i.test(this.view[s].grade)&&e.push(this.view[s]);return this.view=e}}};