function viewRouteOrder(){var e,t,a,r;Cragbook.routes.all.sort(function(e,t){return e.orderid-t.orderid}),t=$("<table>"),a=$("<tr>").append($("<th>").text("Order")).append($("<th>").text("Name")).append($("<th>").text("Grade")).append($("<th>").text("Sector")),t.append(a);for(e in Cragbook.routes.all)a=$("<tr>"),r=$("<td>"),r.append($("<button>").attr("id",Cragbook.routes.all[e].routeid).addClass("fa fa-arrow-up btn-border").attr("onclick","routeUp(this.id)")),r.append($("<button>").attr("id",Cragbook.routes.all[e].routeid).addClass("fa fa-arrow-down btn-border").attr("onclick","routeDown(this.id)")),a.append(r),r=$("<td>").attr("id","route").text(Cragbook.routes.all[e].name),a.append(r),r=$("<td>").text(Cragbook.routes.all[e].grade),a.append(r),r=$("<td>").text(Cragbook.routes.all[e].sector),a.append(r),t.append(a);$("#buttons").html($("<button>").addClass("btn-save").click(updateRouteOrder).text("Save")),$("#buttons").append($("<button>").addClass("btn-cancel").attr("onclick","window.location.assign('"+Cragbook.returnurl+"')").text("Cancel")),$("#routes").html(t)}function updateRouteOrder(){var e="../include/route_json.php",t="routes="+encodeURIComponent(JSON.stringify(Cragbook.routes.all));$("#routes").html('<i class="fa fa-circle-o-notch fa-spin fa-5x center"></i>'),$("#buttons").hide(),$.post(e,t,function(e,t,a){window.location.assign(Cragbook.returnurl)})}function routeDown(e){var t;for(t in Cragbook.routes.all)if(e==Cragbook.routes.all[t].routeid&&Cragbook.routes.all[t].orderid<Cragbook.routes.all.length){Cragbook.routes.all[t].orderid=++Cragbook.routes.all[t].orderid,Cragbook.routes.all[++t].orderid=--Cragbook.routes.all[t].orderid;break}viewRouteOrder()}function routeUp(e){var t;for(t in Cragbook.routes.all)if(e==Cragbook.routes.all[t].routeid&&Cragbook.routes.all[t].orderid>1){Cragbook.routes.all[t].orderid=--Cragbook.routes.all[t].orderid,Cragbook.routes.all[--t].orderid=++Cragbook.routes.all[t].orderid;break}viewRouteOrder()}function getRouteOrder(e){var t,a=1,r="../include/route_json.php?cragid="+e;Cragbook.returnurl="../crag.php?cragid="+e,$("#routes").html('<i class="fa fa-circle-o-notch fa-spin fa-5x center"></i>'),$.getJSON(r,function(e,r,o){Cragbook.routes=new Cragbook.RouteList(e);for(t in Cragbook.routes.all)Cragbook.routes.all[t].orderid=a++;viewRouteOrder()})}function getAreaRoutes(e){var t="include/route_json.php?areaid="+e;$("#routes").html('<i class="fa fa-circle-o-notch fa-spin fa-5x center"></i>'),$.getJSON(t,function(e,t,a){Cragbook.routes=new Cragbook.RouteList(e);for(x in Cragbook.routes.all)for(y in Cragbook.cragList)Cragbook.cragList[y].cragid==Cragbook.routes.all[x].cragid&&(Cragbook.routes.all[x].cragName=Cragbook.cragList[y].name);$("#gradefilter").html(gradeFilter("area")),viewAreaRoutes(Cragbook.routes.getAllRoutes())})}function getCragRoutes(e){var t="include/route_json.php?cragid="+e;$("#routes").html('<i class="fa fa-circle-o-notch fa-spin fa-5x center"></i>'),$.getJSON(t,function(e,t,a){Cragbook.routes=new Cragbook.RouteList(e),$("#gradefilter").html(gradeFilter("crag")),viewCragRoutes(Cragbook.routes.getAllRoutes())})}function getArea(e){var t="include/crag_json.php?areaid="+e;$.getJSON("include/auth_json.php",function(a,r,o){Cragbook.auth=a,$.getJSON(t,function(t,a,r){Cragbook.cragList=t,viewCragList(),"all)"!=e&&getAreaRoutes(e)}),$.getJSON("include/area_json.php?areaid="+e,function(e,t,a){Cragbook.area=e,$("#name").text(Cragbook.area.name),$("#description").text(Cragbook.area.description)})})}function getCrag(e){var t="include/crag_json.php?cragid="+e;$.getJSON("include/auth_json.php",function(a,r,o){Cragbook.auth=a,$.getJSON(t,function(t,a,r){Cragbook.crag=t[0],$("#name").text(Cragbook.crag.name),viewCragInfo(),getCragRoutes(e)})})}function getAllAreas(){var e="include/area_json.php";$.getJSON("include/auth_json.php",function(t,a,r){Cragbook.auth=t,$.getJSON(e,function(e,t,a){Cragbook.areaList=e,viewAreaList()})})}function getAllCrags(){var e="include/crag_json.php";$.getJSON("include/auth_json.php",function(t,a,r){Cragbook.auth=t,$.getJSON(e,function(e,t,a){Cragbook.cragList=e,viewCragList()})})}function viewRouteInfo(e){var t,a,r,o=("include/route_json.php?routeid="+e.data.id,$("<div>").attr("id","routeinfowindow"));$("#modal").html(o);for(t in Cragbook.routes.view)if(Cragbook.routes.view[t].routeid==e.data.id){switch(Cragbook.routes.view[t].discipline){case"1":a=$("<i>").addClass("fa fa-circle-thin").html("&nbsp");break;case"2":a=$("<i>").addClass("fa fa-circle yellow").html("&nbsp");break;case"3":a=$("<i>").addClass("fa fa-circle").html("&nbsp")}switch(Cragbook.routes.view[t].seriousness){case"1":r=$("<i>").addClass("fa fa-smile-o green").html("&nbsp");break;case"2":r=$("<i>").addClass("fa fa-meh-o amber").html("&nbsp");break;case"3":r=$("<i>").addClass("fa fa-frown-o red").html("&nbsp")}$("#routeinfowindow").append($("<h3>").text(Cragbook.routes.view[t].name+" "+Cragbook.routes.view[t].stars).prepend(a)),$("#routeinfowindow").append($("<p>").text(Cragbook.routes.view[t].description).prepend(r)),$("#routeinfowindow").append($("<p>").text(Cragbook.routes.view[t].grade).prepend($("<b>").text("Grade: "))),$("#routeinfowindow").append($("<p>").text(Cragbook.routes.view[t].length+"m").prepend($("<b>").text("Length: "))),$("#routeinfowindow").append($("<p>").text(Cragbook.routes.view[t].sector).prepend($("<b>").text("Sector: "))),$("#routeinfowindow").append($("<p>").text(Cragbook.routes.view[t].firstascent).prepend($("<b>").text("First Ascent: "))),$("#routeinfowindow").append($("<button>").addClass("btn-edit margin-15").attr("onclick","$('#modal').hide()").text("Close")),$("#modal").show()}}function viewCragList(){var e,t;if($(btn).removeClass("btn-border"),$("#listview").addClass("btn-border"),btn="#listview",0!=Cragbook.cragList.length){t=$("<div>").attr("id","list"),$("#view").html(t);for(e in Cragbook.cragList)1==Cragbook.cragList[e]["public"]&&1==Cragbook.auth?$("#list").append($("<a>").addClass("btn-public").attr("href","crag.php?cragid="+Cragbook.cragList[e].cragid).text(Cragbook.cragList[e].name)):$("#list").append($("<a>").addClass("btn").attr("href","crag.php?cragid="+Cragbook.cragList[e].cragid).text(Cragbook.cragList[e].name))}else $("#view").append("<div>").attr("id","nocrags").text("No crags")}function viewAreaList(){var e,t;if($(btn).removeClass("btn-border"),$("#listview").addClass("btn-border"),btn="#listview",0!=Cragbook.areaList.length){t=$("<div>").attr("id","list"),$("#view").html(t);for(e in Cragbook.areaList)1==Cragbook.areaList[e]["public"]&&1==Cragbook.auth?$("#list").append($("<a>").addClass("btn-public").attr("href","area.php?areaid="+Cragbook.areaList[e].areaid).text(Cragbook.areaList[e].name)):$("#list").append($("<a>").addClass("btn").attr("href","area.php?areaid="+Cragbook.areaList[e].areaid).text(Cragbook.areaList[e].name))}else $("#view").append("<div>").attr("id","noareas").text("No areas")}function viewCragInfo(){var e;$(btn).removeClass("btn-border"),$("#infoview").addClass("btn-border"),btn="#infoview",e=$("<div>").attr("id","craginfo"),$("#view").html(e),$("#craginfo").append($("<p>").addClass("heading").text(Cragbook.crag.description)),$("#craginfo").append($("<p>").text(Cragbook.crag.access).prepend($("<b>").text("Access: "))),$("#craginfo").append($("<p>").text(Cragbook.crag.policy).prepend($("<b>").text("Fixed gear policy: "))),$("#craginfo").append($("<p>").text(Cragbook.crag.approach).prepend($("<b>").text("Approach: ")))}function viewAreaRoutes(e){var t,a,r,o=$("<table></table>");if(e.length>0){a=$("<tr>"),a.append($("<th>")),a.append($("<th>").text("Name").attr("onclick","viewRoutes('area', Cragbook.routes.sort('name'))")),a.append($("<th>").text("Grade").attr("onclick","viewRoutes('area', Cragbook.routes.sort('grade'))")),a.append($("<th>")),a.append($("<th>").text("Stars").attr("onclick","viewRoutes('area', Cragbook.routes.sort('stars'))")),a.append($("<th>").text("Length").attr("onclick","viewRoutes('area', Cragbook.routes.sort('length'))")),a.append($("<th>").text("Crag").attr("onclick","viewRoutes('area', Cragbook.routes.sort('crag'))")),a.append($("<th>").text("First Ascent").attr("onclick","viewRoutes('area', Cragbook.routes.sort('firstascent'))")),o.append(a);for(t in e){switch(a=$("<tr>").addClass("pointer").attr("id",e[t].routeid),r=$("<td>").click({id:e[t].routeid},viewRouteInfo),e[t].discipline){case"1":r.append($("<i>").addClass("fa fa-circle-thin fa-lg"));break;case"2":r.append($("<i>").addClass("fa fa-circle fa-lg yellow"));break;case"3":r.append($("<i>").addClass("fa fa-circle fa-lg"));break;case"4":r.append($("<i>").addClass("fa fa-circle fa-lg yellow"))}switch(a.append(r),r=4==e[t].discipline?$("<td>").addClass("hybrid").click({id:e[t].routeid},viewRouteInfo):$("<td>").click({id:e[t].routeid},viewRouteInfo),r.text(e[t].name),a.append(r),r=4==e[t].discipline?$("<td>").addClass("hybrid").click({id:e[t].routeid},viewRouteInfo):$("<td>").click({id:e[t].routeid},viewRouteInfo),r.text(e[t].grade),a.append(r),r=$("<td>").click({id:e[t].routeid},viewRouteInfo),e[t].seriousness){case"1":r.append($("<i>").addClass("fa fa-smile-o green"));break;case"2":r.append($("<i>").addClass("fa fa-meh-o amber"));break;case"3":r.append($("<i>").addClass("fa fa-frown-o red"));break;case"4":r.append($("<i>").addClass("fa fa-times-circle"))}a.append(r),r=$("<td>").click({id:e[t].routeid},viewRouteInfo),r.text(e[t].stars),a.append(r),r=$("<td>").click({id:e[t].routeid},viewRouteInfo),r.text(e[t].length+"m"),a.append(r),r=$("<td>"),r.append($("<a>").attr("href","crag.php?cragid="+e[t].cragid).text(e[t].cragName)),a.append(r),r=$("<td>").click({id:e[t].routeid},viewRouteInfo),r.append($("<div>").addClass("firstascent").text(e[t].firstascent)),a.append(r),o.append(a)}}else o.append($("<p>").text("No routes"));$("#routes").html(o)}function viewCragRoutes(e){var t,a,r,o=$("<table></table");if(e.length>0){a=$("<tr>"),a.append($("<th>")),a.append($("<th>").text("Name").attr("onclick","viewRoutes('crag', Cragbook.routes.sort('name'))")),a.append($("<th>").text("Grade").attr("onclick","viewRoutes('crag', Cragbook.routes.sort('grade'))")),a.append($("<th>")),a.append($("<th>").text("Stars").attr("onclick","viewRoutes('crag', Cragbook.routes.sort('stars'))")),a.append($("<th>").text("Length").attr("onclick","viewRoutes('crag', Cragbook.routes.sort('length'))")),a.append($("<th>").text("First Ascent").attr("onclick","viewRoutes('crag', Cragbook.routes.sort('firstascent'))")),a.append($("<th>").text("Sector").attr("onclick","viewRoutes('crag', Cragbook.routes.sort('sector'))")),Cragbook.auth===!0&&a.append($("<th>")),o.append(a);for(t in e){switch(a=$("<tr>").addClass("pointer").attr("id",e[t].routeid),r=$("<td>").click({id:e[t].routeid},viewRouteInfo),e[t].discipline){case"1":r.append($("<i>").addClass("fa fa-circle-thin fa-lg"));break;case"2":r.append($("<i>").addClass("fa fa-circle fa-lg yellow"));break;case"3":r.append($("<i>").addClass("fa fa-circle fa-lg"));break;case"4":r.append($("<i>").addClass("fa fa-circle fa-lg yellow"))}switch(a.append(r),r=4==e[t].discipline?$("<td>").addClass("hybrid").click({id:e[t].routeid},viewRouteInfo):$("<td>").click({id:e[t].routeid},viewRouteInfo),r.text(e[t].name),a.append(r),r=4==e[t].discipline?$("<td>").addClass("hybrid").click({id:e[t].routeid},viewRouteInfo):$("<td>").click({id:e[t].routeid},viewRouteInfo),r.text(e[t].grade),a.append(r),r=$("<td>").click({id:e[t].routeid},viewRouteInfo),e[t].seriousness){case"1":r.append($("<i>").addClass("fa fa-smile-o green"));break;case"2":r.append($("<i>").addClass("fa fa-meh-o amber"));break;case"3":r.append($("<i>").addClass("fa fa-frown-o red"));break;case"4":r.append($("<i>").addClass("fa fa-times-circle"))}a.append(r),r=$("<td>").click({id:e[t].routeid},viewRouteInfo),r.text(e[t].stars),a.append(r),r=$("<td>").click({id:e[t].routeid},viewRouteInfo),r.text(e[t].length+"m"),a.append(r),r=$("<td>").click({id:e[t].routeid},viewRouteInfo),r.append($("<div>").addClass("firstascent").text(e[t].firstascent)),a.append(r),r=$("<td>").click({id:e[t].routeid},viewRouteInfo),r.text(e[t].sector),a.append(r),Cragbook.auth===!0&&(r=$("<td>"),r.append($("<a>").addClass("fa fa-edit fa-lg").attr("href","admin/route.php?action=edit&routeid="+e[t].routeid)),r.append(" "),r.append($("<a>").addClass("fa fa-trash-o fa-lg").attr("href","admin/route.php?action=delete&routeid="+e[t].routeid)),a.append(r)),o.append(a)}}else o.append($("<p>").text("No routes"));$("#routes").html(o)}function viewRoutes(e,t){var a;a=$("<div>").addClass("center"),a.append($("<i>").addClass("fa fa-circle-o-notch fa-spin fa-5x")),$("#routes").html(a),"area"==e?viewAreaRoutes(t):"crag"==e&&viewCragRoutes(t)}function viewCragMap(e){var t,a;if($(btn).removeClass("btn-border"),$("#mapview").addClass("btn-border"),btn="#mapview","all"==e)var r=new google.maps.LatLng(defaultCenter),o=9,i=500;else if("crag"==e){Cragbook.cragList=[Cragbook.crag],e=Cragbook.crag.location.split(",");var r=new google.maps.LatLng(e[0],e[1]),o=15,i=300}else{e=Cragbook.area.location.split(",");var r=new google.maps.LatLng(e[0],e[1]),o=10,i=300}$("#view").html('<div id="map" class="panel" style="height: '+i+'px; width: 100%"></div>');var n=$("#map").get(0);map=new google.maps.Map(n,{zoom:o,center:r,scrollwheel:!1,mapTypeId:google.maps.MapTypeId.TERRAIN});for(t in Cragbook.cragList)if(""===Cragbook.cragList[t].location);else{var e=Cragbook.cragList[t].location.split(","),r=new google.maps.LatLng(e[0],e[1]),s=new google.maps.Marker({position:r,map:map,title:Cragbook.cragList[t].name});a='<div><a href="crag.php?cragid='+Cragbook.cragList[t].cragid+'"><b><h3>'+Cragbook.cragList[t].name+"</h3></b></a></div>",a+="<div>"+Cragbook.cragList[t].description+"</div>",s.info=a,s.addListener("click",function(){infowindow.setContent(this.info),infowindow.open(map,this)})}}function viewAreaMap(){var e,t;$(btn).removeClass("btn-border"),$("#mapview").addClass("btn-border"),btn="#mapview",$("#view").html('<div id="map" class="panel" style="height: 500px; width: 100%"></div>');var a=$("#map").get(0);map=new google.maps.Map(a,{zoom:9,center:defaultCenter,scrollwheel:!1,mapTypeId:google.maps.MapTypeId.TERRAIN});for(e in Cragbook.areaList)if(""===Cragbook.areaList[e].location);else{var r=Cragbook.areaList[e].location.split(","),o=new google.maps.LatLng(r[0],r[1]),i=new google.maps.Marker({position:o,map:map,title:Cragbook.areaList[e].name});t='<div><a href="area.php?areaid='+Cragbook.areaList[e].areaid+'"><b><h3>'+Cragbook.areaList[e].name+"</h3></b></a></div>",t+="<div>"+Cragbook.areaList[e].description+"</div>",i.info=t,i.addListener("click",function(){infowindow.setContent(this.info),infowindow.open(map,this)})}}function setAreaMap(e){if(""===e)var t=defaultCenter,a=5;else{e=e.split(",");var t=new google.maps.LatLng(e[0],e[1]),a=10}var r=$("#map").get(0);map=new google.maps.Map(r,{zoom:a,center:t,scrollwheel:!1,mapTypeId:google.maps.MapTypeId.TERRAIN}),map.addListener("center_changed",function(){var e=map.getCenter();$("#latlng").val(e.lat()+","+e.lng())})}function setCragMap(e){if(""===e)var t=defaultCenter,a=5;else{e=e.split(",");var t=new google.maps.LatLng(e[0],e[1]),a=12}var r=$("#map").get(0);map=new google.maps.Map(r,{zoom:a,center:t,scrollwheel:!1,mapTypeId:google.maps.MapTypeId.TERRAIN}),marker=""!==e?new google.maps.Marker({position:t,map:map}):null,map.addListener("rightclick",function(e){null!==marker&&marker.setMap(null),marker=new google.maps.Marker({position:e.latLng,map:map}),map.panTo(e.latLng),$("#latlng").val(e.latLng.lat()+","+e.latLng.lng())})}function viewCragDownloads(){$(btn).removeClass("btn-border"),$("#photoview").addClass("btn-border"),btn="#photoview"}function viewAreaDownloads(){$(btn).removeClass("btn-border"),$("#photoview").addClass("btn-border"),btn="#photoview"}function printRoutes(e){var t,a,r;t=window.open(),r='<!DOCTYPE html><html><head><meta charset="UTF-8">',r+="<title>Print</title>",r+='<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>',r+='<script src="https://maps.googleapis.com/maps/api/js?key=<?= $googlemaps_apikey ?>"></script>',r+='<script src="include/js/functions.js"></script>',r+='<link rel="stylesheet" href="css/cragbook.css">',r+='<link rel="stylesheet" href="css/font-awesome/css/font-awesome.min.css">',r+="</head><body>",a=$("<h6>").text("Great Western Rock"),"area"==e?(a.append($("<p>").append($("<h2>").text(Cragbook.area.name))),a.append($("<p>").append($("<h4>").text(Cragbook.area.description))),a.append($("<p>").append($("<h4>").text("Routes")))):"crag"==e?(a.append($("<p>").append($("<h2>").text(Cragbook.crag.name))),a.append($("<p>").append($("#view").html())),a.append($("<p>").append($("<h4>").text("Routes")))):"search"==e&&(a.append($("<p>").append($("<h2>").text("Search Results"))),a.append($("<p>").append($("#searchoptions").html()))),t.document.write(r),t.document.write(a.html()),t.document.write($("#routes").html()),t.document.write("</body><script>window.print();window.close();</script></html>")}function getSearch(){var e,t,a,r="include/search_json.php",o=$("#area").val(),i=$("#crag").val(),n=$("#route").val(),s=$("#grade").val();return""===o||o.match(/^[0-9a-zA-Z ]+$/)?""===i||i.match(/^[0-9a-zA-Z ]+$/)?""===n||n.match(/^[0-9a-zA-Z ]+$/)?""===s||s.match(/^[0-9a-zA-Z \+\-]+$/)?""==o&&""==i&&""==n&&""==s?void $("#error").html($("<div>").addClass("red").text("Please enter at least one search item.")):(a=$("<div>"),a.append($("<i>").addClass("fa fa-search btn btn-border").click(showSearchForm)),a.append($("<i>").addClass("fa fa-print btn btn-border").attr("onclick","printRoutes('search')")),$("#searchform").html(a),a=$("<div>").addClass("center"),a.append($("<i>").addClass("fa fa-circle-o-notch fa-spin fa-5x")),$("#searchresults").html(a),t={area:o,crag:i,route:n,grade:s},e="search="+encodeURIComponent(JSON.stringify(t)),void $.post(r,e,function(e,a,r){Cragbook.routes=new Cragbook.RouteList(JSON.parse(e)),$.getJSON("include/crag_json.php",function(e){Cragbook.cragList=e;for(x in Cragbook.routes.all)for(y in Cragbook.cragList)Cragbook.cragList[y].cragid==Cragbook.routes.all[x].cragid&&(Cragbook.routes.all[x].cragName=Cragbook.cragList[y].name);showSearchResults(t)})})):void $("#error").html($("<div>").addClass("red").text("Invalid input for grade. Must only contain letters, numbers and +/-.")):void $("#error").html($("<div>").addClass("red").text("Invalid input for route. Must only contain letters or numbers.")):void $("#error").html($("<div>").addClass("red").text("Invalid input for crag. Must only contain letters or numbers.")):void $("#error").html($("<div>").addClass("red").text("Invalid input for area. Must only contain letters or numbers."))}function showSearchForm(){var e=$("<div>");e.append($("<div>").addClass("heading").text("Search for routes")),e.append($("<input>").attr("type","text").attr("id","area").attr("placeholder","Area...")),e.append($("<input>").attr("type","text").attr("id","crag").attr("placeholder","Crag...")),e.append($("<input>").attr("type","text").attr("id","route").attr("placeholder","Route...")),e.append($("<input>").attr("type","text").attr("id","grade").attr("placeholder","Grade...")),e.append($("<button>").addClass("btn-edit").click(getSearch).text("Search")),e.append($("<div>").attr("id","error")),$("#searchform").addClass("panel").html(e)}function showSearchResults(e){var t=$("<div>");""==e.area&&(e.area="None"),""==e.crag&&(e.crag="None"),""==e.route&&(e.route="None"),""==e.grade&&(e.grade="None"),t.append($("<div>").addClass("heading").text("Search Results").append($("<p>").attr("id","searchoptions").text("Area: "+e.area+" / Crag: "+e.crag+" / Route: "+e.route+" / Grade: "+e.grade))),t.append($("<div>").attr("id","gradefilter").html(gradeFilter("area"))),t.append($("<div>").addClass("panel").attr("id","routes")),t.append($("<div>").addClass("modal").attr("id","modal")),$("#searchresults").addClass("panel").html(t),viewAreaRoutes(Cragbook.routes.getAllRoutes())}function allRoutesFilter(e){viewRoutes(e,Cragbook.routes.getAllRoutes()),$("#filter").hide()}function tradRoutesFilter(e){var t;t=$("<div>"),t.append($("<button>").addClass("btn").attr("onclick","viewRoutes('"+e+"', Cragbook.routes.gradeFilter('M'))").text("M")),t.append($("<button>").addClass("btn").attr("onclick","viewRoutes('"+e+"', Cragbook.routes.gradeFilter('D'))").text("D")),t.append($("<button>").addClass("btn").attr("onclick","viewRoutes('"+e+"', Cragbook.routes.gradeFilter('VD'))").text("VD")),t.append($("<button>").addClass("btn").attr("onclick","viewRoutes('"+e+"', Cragbook.routes.gradeFilter('S'))").text("S")),t.append($("<button>").addClass("btn").attr("onclick","viewRoutes('"+e+"', Cragbook.routes.gradeFilter('VS'))").text("VS")),t.append($("<button>").addClass("btn").attr("onclick","viewRoutes('"+e+"', Cragbook.routes.gradeFilter('HVS'))").text("HVS")),t.append($("<button>").addClass("btn").attr("onclick","viewRoutes('"+e+"', Cragbook.routes.gradeFilter('E'))").text("Extreme")),viewRoutes(e,Cragbook.routes.getTradRoutes()),$("#filter").html(t).show()}function sportRoutesFilter(e){var t;t=$("<div>"),t.append($("<button>").addClass("btn").attr("onclick","viewRoutes('"+e+"', Cragbook.routes.gradeFilter('F1'))").text("F1")),t.append($("<button>").addClass("btn").attr("onclick","viewRoutes('"+e+"', Cragbook.routes.gradeFilter('F2'))").text("F2")),t.append($("<button>").addClass("btn").attr("onclick","viewRoutes('"+e+"', Cragbook.routes.gradeFilter('F3'))").text("F3")),t.append($("<button>").addClass("btn").attr("onclick","viewRoutes('"+e+"', Cragbook.routes.gradeFilter('F4'))").text("F4")),t.append($("<button>").addClass("btn").attr("onclick","viewRoutes('"+e+"', Cragbook.routes.gradeFilter('F5'))").text("F5")),t.append($("<button>").addClass("btn").attr("onclick","viewRoutes('"+e+"', Cragbook.routes.gradeFilter('F6'))").text("F6")),t.append($("<button>").addClass("btn").attr("onclick","viewRoutes('"+e+"', Cragbook.routes.gradeFilter('F7'))").text("F7")),t.append($("<button>").addClass("btn").attr("onclick","viewRoutes('"+e+"', Cragbook.routes.gradeFilter('F8'))").text("F8")),t.append($("<button>").addClass("btn").attr("onclick","viewRoutes('"+e+"', Cragbook.routes.gradeFilter('F9'))").text("F9")),viewRoutes(e,Cragbook.routes.getSportRoutes()),$("#filter").html(t).show()}function boulderProblemsFilter(e){var t;t=$("<div>"),t.append($("<button>").addClass("btn").attr("onclick","viewRoutes('"+e+"', Cragbook.routes.gradeFilter('f1'))").text("f1")),t.append($("<button>").addClass("btn").attr("onclick","viewRoutes('"+e+"', Cragbook.routes.gradeFilter('f2'))").text("f2")),t.append($("<button>").addClass("btn").attr("onclick","viewRoutes('"+e+"', Cragbook.routes.gradeFilter('f3'))").text("f3")),t.append($("<button>").addClass("btn").attr("onclick","viewRoutes('"+e+"', Cragbook.routes.gradeFilter('f4'))").text("f4")),t.append($("<button>").addClass("btn").attr("onclick","viewRoutes('"+e+"', Cragbook.routes.gradeFilter('f5'))").text("f5")),t.append($("<button>").addClass("btn").attr("onclick","viewRoutes('"+e+"', Cragbook.routes.gradeFilter('f6'))").text("f6")),t.append($("<button>").addClass("btn").attr("onclick","viewRoutes('"+e+"', Cragbook.routes.gradeFilter('f7'))").text("f7")),t.append($("<button>").addClass("btn").attr("onclick","viewRoutes('"+e+"', Cragbook.routes.gradeFilter('f8'))").text("f8")),t.append($("<button>").addClass("btn").attr("onclick","viewRoutes('"+e+"', Cragbook.routes.gradeFilter('f9'))").text("f9")),viewRoutes(e,Cragbook.routes.getBoulderProblems()),$("#filter").html(t).show()}function gradeFilter(e){var t,a,r,o,i,n;return t=$("<div>"),a=$("<button>").addClass("btn").attr("onclick","allRoutesFilter('"+e+"')").text("All"),r=$("<button>").addClass("btn").attr("onclick","tradRoutesFilter('"+e+"')").html('<i class="fa fa-circle-o"></i> Trad'),o=$("<button>").addClass("btn").attr("onclick","sportRoutesFilter('"+e+"')").html('<i class="fa fa-circle yellow"></i> Sport'),i=$("<button>").addClass("btn").attr("onclick","boulderProblemsFilter('"+e+"')").html('<i class="fa fa-circle"></i> Bouldering'),n=$("<div>").attr("id","filter"),t.append(a),t.append(r),t.append(o),t.append(i),t.append(n),t}var map,marker,btn;const defaultCenter={lat:51.4490382,lng:-2.5943542};var infowindow=new google.maps.InfoWindow;