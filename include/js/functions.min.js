function viewRouteOrder(){var e,a,t,o;Cragbook.allRoutes.sort(function(e,a){return e.orderid-a.orderid}),a=$("<table>"),t=$("<tr>").append($("<th>").text("Order")).append($("<th>").text("Name")).append($("<th>").text("Grade")).append($("<th>").text("Sector")),a.append(t);for(e in Cragbook.allRoutes)t=$("<tr>"),o=$("<td>"),o.append($("<button>").attr("id",Cragbook.allRoutes[e].routeid).addClass("fa fa-arrow-up btn-border").attr("onclick","routeUp(this.id)")),o.append($("<button>").attr("id",Cragbook.allRoutes[e].routeid).addClass("fa fa-arrow-down btn-border").attr("onclick","routeDown(this.id)")),t.append(o),o=$("<td>").attr("id","route").text(Cragbook.allRoutes[e].name),t.append(o),o=$("<td>").text(Cragbook.allRoutes[e].grade),t.append(o),o=$("<td>").text(Cragbook.allRoutes[e].sector),t.append(o),a.append(t);$("#buttons").html($("<button>").addClass("btn-save").click(updateRouteOrder).text("Save")),$("#buttons").append($("<button>").addClass("btn-cancel").attr("onclick","window.location.assign('"+Cragbook.returnurl+"')").text("Cancel")),$("#routes").html(a)}function updateRouteOrder(){var e="../include/route_json.php",a="routes="+encodeURIComponent(JSON.stringify(Cragbook.allRoutes));$("#routes").html('<i class="fa fa-circle-o-notch fa-spin fa-5x center"></i>'),$("#buttons").hide(),$.post(e,a,function(e,a,t){window.location.assign(Cragbook.returnurl)})}function routeDown(e){var a;for(a in Cragbook.allRoutes)if(e==Cragbook.allRoutes[a].routeid&&Cragbook.allRoutes[a].orderid<Cragbook.allRoutes.length){Cragbook.allRoutes[a].orderid=++Cragbook.allRoutes[a].orderid,Cragbook.allRoutes[++a].orderid=--Cragbook.allRoutes[a].orderid;break}viewRouteOrder()}function routeUp(e){var a;for(a in Cragbook.allRoutes)if(e==Cragbook.allRoutes[a].routeid&&Cragbook.allRoutes[a].orderid>1){Cragbook.allRoutes[a].orderid=--Cragbook.allRoutes[a].orderid,Cragbook.allRoutes[--a].orderid=++Cragbook.allRoutes[a].orderid;break}viewRouteOrder()}function getRouteOrder(e){var a,t=1,o="../include/route_json.php?cragid="+e;Cragbook.returnurl="../crag.php?cragid="+e,$("#routes").html('<i class="fa fa-circle-o-notch fa-spin fa-5x center"></i>'),$.getJSON(o,function(e,o,r){Cragbook.allRoutes=e;for(a in allRoutes)Cragbook.allRoutes[a].orderid=t++;viewRouteOrder()})}function getAreaRoutes(e){var a="include/route_json.php?areaid="+e;$("#routes").html('<i class="fa fa-circle-o-notch fa-spin fa-5x center"></i>'),$.getJSON(a,function(e,a,t){Cragbook.routes=new Cragbook.RouteList(e);for(x in Cragbook.routes.all)for(y in Cragbook.cragList)Cragbook.cragList[y].cragid==Cragbook.routes.all[x].cragid&&(Cragbook.routes.all[x].cragName=Cragbook.cragList[y].name);$("#gradefilter").html(gradeFilter("area")),viewAreaRoutes(Cragbook.routes.getAllRoutes())})}function getCragRoutes(e){var a="include/route_json.php?cragid="+e;$("#routes").html('<i class="fa fa-circle-o-notch fa-spin fa-5x center"></i>'),$.getJSON(a,function(e,a,t){Cragbook.routes=new Cragbook.RouteList(e),$("#gradefilter").html(gradeFilter("crag")),viewCragRoutes(Cragbook.routes.getAllRoutes())})}function getArea(e){var a="include/crag_json.php?areaid="+e;$.getJSON("include/auth_json.php",function(t,o,r){Cragbook.auth=t,$.getJSON(a,function(a,t,o){Cragbook.cragList=a,viewCragList(),"all)"!=e&&getAreaRoutes(e)}),$.getJSON("include/area_json.php?areaid="+e,function(e,a,t){Cragbook.area=e,$("#name").text(Cragbook.area.name),$("#description").text(Cragbook.area.description)})})}function getCrag(e){var a="include/crag_json.php?cragid="+e;$.getJSON("include/auth_json.php",function(t,o,r){Cragbook.auth=t,$.getJSON(a,function(a,t,o){Cragbook.crag=a[0],$("#name").text(Cragbook.crag.name),viewCragInfo(),getCragRoutes(e)})})}function getAllAreas(){var e="include/area_json.php";$.getJSON("include/auth_json.php",function(a,t,o){Cragbook.auth=a,$.getJSON(e,function(e,a,t){Cragbook.areaList=e,viewAreaList()})})}function getAllCrags(){var e="include/crag_json.php";$.getJSON("include/auth_json.php",function(a,t,o){Cragbook.auth=a,$.getJSON(e,function(e,a,t){Cragbook.cragList=e,viewCragList()})})}function viewRouteInfo(e){var a,t,o,r=("include/route_json.php?routeid="+e.data.id,$("<div>").attr("id","routeinfowindow"));$("#modal").html(r);for(a in Cragbook.routes.view)if(Cragbook.routes.view[a].routeid==e.data.id){switch(Cragbook.routes.view[a].discipline){case"1":t=$("<i>").addClass("fa fa-circle-thin").html("&nbsp");break;case"2":t=$("<i>").addClass("fa fa-circle yellow").html("&nbsp");break;case"3":t=$("<i>").addClass("fa fa-circle").html("&nbsp")}switch(Cragbook.routes.view[a].seriousness){case"1":o=$("<i>").addClass("fa fa-smile-o green").html("&nbsp");break;case"2":o=$("<i>").addClass("fa fa-meh-o amber").html("&nbsp");break;case"3":o=$("<i>").addClass("fa fa-frown-o red").html("&nbsp")}$("#routeinfowindow").append($("<h3>").text(Cragbook.routes.view[a].name+" "+Cragbook.routes.view[a].stars).prepend(t)),$("#routeinfowindow").append($("<p>").text(Cragbook.routes.view[a].description).prepend(o)),$("#routeinfowindow").append($("<p>").text(Cragbook.routes.view[a].grade).prepend($("<b>").text("Grade: "))),$("#routeinfowindow").append($("<p>").text(Cragbook.routes.view[a].length+"m").prepend($("<b>").text("Length: "))),$("#routeinfowindow").append($("<p>").text(Cragbook.routes.view[a].sector).prepend($("<b>").text("Sector: "))),$("#routeinfowindow").append($("<p>").text(Cragbook.routes.view[a].firstascent).prepend($("<b>").text("First Ascent: "))),$("#routeinfowindow").append($("<button>").addClass("btn-edit margin-15").attr("onclick","$('#modal').hide()").text("Close")),$("#modal").show()}}function viewCragList(){var e,a;if($(btn).removeClass("btn-border"),$("#listview").addClass("btn-border"),btn="#listview",0!=Cragbook.cragList.length){a=$("<div>").attr("id","list"),$("#view").html(a);for(e in Cragbook.cragList)1==Cragbook.cragList[e]["public"]&&1==Cragbook.auth?$("#list").append($("<a>").addClass("btn-public").attr("href","crag.php?cragid="+Cragbook.cragList[e].cragid).text(Cragbook.cragList[e].name)):$("#list").append($("<a>").addClass("btn").attr("href","crag.php?cragid="+Cragbook.cragList[e].cragid).text(Cragbook.cragList[e].name))}else $("#view").append("<div>").attr("id","nocrags").text("No crags")}function viewAreaList(){var e,a;if($(btn).removeClass("btn-border"),$("#listview").addClass("btn-border"),btn="#listview",0!=Cragbook.areaList.length){a=$("<div>").attr("id","list"),$("#view").html(a);for(e in Cragbook.areaList)1==Cragbook.areaList[e]["public"]&&1==Cragbook.auth?$("#list").append($("<a>").addClass("btn-public").attr("href","area.php?areaid="+Cragbook.areaList[e].areaid).text(Cragbook.areaList[e].name)):$("#list").append($("<a>").addClass("btn").attr("href","area.php?areaid="+Cragbook.areaList[e].areaid).text(Cragbook.areaList[e].name))}else $("#view").append("<div>").attr("id","noareas").text("No areas")}function viewCragInfo(){var e;$(btn).removeClass("btn-border"),$("#infoview").addClass("btn-border"),btn="#infoview",e=$("<div>").attr("id","craginfo"),$("#view").html(e),$("#craginfo").append($("<p>").addClass("heading").text(Cragbook.crag.description)),$("#craginfo").append($("<p>").text(Cragbook.crag.access).prepend($("<b>").text("Access: "))),$("#craginfo").append($("<p>").text(Cragbook.crag.policy).prepend($("<b>").text("Fixed gear policy: "))),$("#craginfo").append($("<p>").text(Cragbook.crag.approach).prepend($("<b>").text("Approach: ")))}function viewAreaRoutes(e){var a,t,o,r=$("<table></table>");if(e.length>0){t=$("<tr>"),t.append($("<th>")),t.append($("<th>").text("Name").attr("onclick","viewRoutes('area', Cragbook.routes.sort('name'))")),t.append($("<th>").text("Grade").attr("onclick","viewRoutes('area', Cragbook.routes.sort('grade'))")),t.append($("<th>")),t.append($("<th>").text("Stars").attr("onclick","viewRoutes('area', Cragbook.routes.sort('stars'))")),t.append($("<th>").text("Length").attr("onclick","viewRoutes('area', Cragbook.routes.sort('length'))")),t.append($("<th>").text("Crag").attr("onclick","viewRoutes('area', Cragbook.routes.sort('crag'))")),t.append($("<th>").text("First Ascent").attr("onclick","viewRoutes('area', Cragbook.routes.sort('firstascent'))")),r.append(t);for(a in e){switch(t=$("<tr>").addClass("pointer").attr("id",e[a].routeid),o=$("<td>").click({id:e[a].routeid},viewRouteInfo),e[a].discipline){case"1":o.append($("<i>").addClass("fa fa-circle-thin fa-lg"));break;case"2":o.append($("<i>").addClass("fa fa-circle fa-lg yellow"));break;case"3":o.append($("<i>").addClass("fa fa-circle fa-lg"));break;case"4":o.append($("<i>").addClass("fa fa-circle fa-lg yellow"))}switch(t.append(o),o=4==e[a].discipline?$("<td>").addClass("hybrid").click({id:e[a].routeid},viewRouteInfo):$("<td>").click({id:e[a].routeid},viewRouteInfo),o.text(e[a].name),t.append(o),o=4==e[a].discipline?$("<td>").addClass("hybrid").click({id:e[a].routeid},viewRouteInfo):$("<td>").click({id:e[a].routeid},viewRouteInfo),o.text(e[a].grade),t.append(o),o=$("<td>").click({id:e[a].routeid},viewRouteInfo),e[a].seriousness){case"1":o.append($("<i>").addClass("fa fa-smile-o green"));break;case"2":o.append($("<i>").addClass("fa fa-meh-o amber"));break;case"3":o.append($("<i>").addClass("fa fa-frown-o red"));break;case"4":o.append($("<i>").addClass("fa fa-times-circle"))}t.append(o),o=$("<td>").click({id:e[a].routeid},viewRouteInfo),o.text(e[a].stars),t.append(o),o=$("<td>").click({id:e[a].routeid},viewRouteInfo),o.text(e[a].length+"m"),t.append(o),o=$("<td>"),o.append($("<a>").attr("href","crag.php?cragid="+e[a].cragid).text(e[a].cragName)),t.append(o),o=$("<td>").click({id:e[a].routeid},viewRouteInfo),o.append($("<div>").addClass("firstascent").text(e[a].firstascent)),t.append(o),r.append(t)}}else r.append($("<p>").text("No routes"));$("#routes").html(r)}function viewCragRoutes(e){var a,t,o,r=$("<table></table");if(e.length>0){t=$("<tr>"),t.append($("<th>")),t.append($("<th>").text("Name").attr("onclick","viewRoutes('crag', Cragbook.routes.sort('name'))")),t.append($("<th>").text("Grade").attr("onclick","viewRoutes('crag', Cragbook.routes.sort('grade'))")),t.append($("<th>")),t.append($("<th>").text("Stars").attr("onclick","viewRoutes('crag', Cragbook.routes.sort('stars'))")),t.append($("<th>").text("Length").attr("onclick","viewRoutes('crag', Cragbook.routes.sort('length'))")),t.append($("<th>").text("First Ascent").attr("onclick","viewRoutes('crag', Cragbook.routes.sort('firstascent'))")),t.append($("<th>").text("Sector").attr("onclick","viewRoutes('crag', Cragbook.routes.sort('sector'))")),Cragbook.auth===!0&&t.append($("<th>")),r.append(t);for(a in e){switch(t=$("<tr>").addClass("pointer").attr("id",e[a].routeid),o=$("<td>").click({id:e[a].routeid},viewRouteInfo),e[a].discipline){case"1":o.append($("<i>").addClass("fa fa-circle-thin fa-lg"));break;case"2":o.append($("<i>").addClass("fa fa-circle fa-lg yellow"));break;case"3":o.append($("<i>").addClass("fa fa-circle fa-lg"));break;case"4":o.append($("<i>").addClass("fa fa-circle fa-lg yellow"))}switch(t.append(o),o=4==e[a].discipline?$("<td>").addClass("hybrid").click({id:e[a].routeid},viewRouteInfo):$("<td>").click({id:e[a].routeid},viewRouteInfo),o.text(e[a].name),t.append(o),o=4==e[a].discipline?$("<td>").addClass("hybrid").click({id:e[a].routeid},viewRouteInfo):$("<td>").click({id:e[a].routeid},viewRouteInfo),o.text(e[a].grade),t.append(o),o=$("<td>").click({id:e[a].routeid},viewRouteInfo),e[a].seriousness){case"1":o.append($("<i>").addClass("fa fa-smile-o green"));break;case"2":o.append($("<i>").addClass("fa fa-meh-o amber"));break;case"3":o.append($("<i>").addClass("fa fa-frown-o red"));break;case"4":o.append($("<i>").addClass("fa fa-times-circle"))}t.append(o),o=$("<td>").click({id:e[a].routeid},viewRouteInfo),o.text(e[a].stars),t.append(o),o=$("<td>").click({id:e[a].routeid},viewRouteInfo),o.text(e[a].length+"m"),t.append(o),o=$("<td>").click({id:e[a].routeid},viewRouteInfo),o.append($("<div>").addClass("firstascent").text(e[a].firstascent)),t.append(o),o=$("<td>").click({id:e[a].routeid},viewRouteInfo),o.text(e[a].sector),t.append(o),Cragbook.auth===!0&&(o=$("<td>"),o.append($("<a>").addClass("fa fa-edit fa-lg").attr("href","admin/route.php?action=edit&routeid="+e[a].routeid)),o.append(" "),o.append($("<a>").addClass("fa fa-trash-o fa-lg").attr("href","admin/route.php?action=delete&routeid="+e[a].routeid)),t.append(o)),r.append(t)}}else r.append($("<p>").text("No routes"));$("#routes").html(r)}function viewRoutes(e,a){var t;t=$("<div>").addClass("center"),t.append($("<i>").addClass("fa fa-circle-o-notch fa-spin fa-5x")),$("#routes").html(t),"area"==e?viewAreaRoutes(a):"crag"==e&&viewCragRoutes(a)}function viewCragMap(e){var a,t;if($(btn).removeClass("btn-border"),$("#mapview").addClass("btn-border"),btn="#mapview","all"==e)var o=new google.maps.LatLng(defaultCenter),r=9,i=500;else if("crag"==e){Cragbook.cragList=[Cragbook.crag],e=Cragbook.crag.location.split(",");var o=new google.maps.LatLng(e[0],e[1]),r=15,i=300}else{e=Cragbook.area.location.split(",");var o=new google.maps.LatLng(e[0],e[1]),r=10,i=300}$("#view").html('<div id="map" class="panel" style="height: '+i+'px; width: 100%"></div>');var n=$("#map").get(0);map=new google.maps.Map(n,{zoom:r,center:o,scrollwheel:!1,mapTypeId:google.maps.MapTypeId.TERRAIN});for(a in Cragbook.cragList)if(""===Cragbook.cragList[a].location);else{var e=Cragbook.cragList[a].location.split(","),o=new google.maps.LatLng(e[0],e[1]),s=new google.maps.Marker({position:o,map:map,title:Cragbook.cragList[a].name});t='<div><a href="crag.php?cragid='+Cragbook.cragList[a].cragid+'"><b><h3>'+Cragbook.cragList[a].name+"</h3></b></a></div>",t+="<div>"+Cragbook.cragList[a].description+"</div>",s.info=t,s.addListener("click",function(){infowindow.setContent(this.info),infowindow.open(map,this)})}}function viewAreaMap(){var e,a;$(btn).removeClass("btn-border"),$("#mapview").addClass("btn-border"),btn="#mapview",$("#view").html('<div id="map" class="panel" style="height: 500px; width: 100%"></div>');var t=$("#map").get(0);map=new google.maps.Map(t,{zoom:9,center:defaultCenter,scrollwheel:!1,mapTypeId:google.maps.MapTypeId.TERRAIN});for(e in Cragbook.areaList)if(""===Cragbook.areaList[e].location);else{var o=Cragbook.areaList[e].location.split(","),r=new google.maps.LatLng(o[0],o[1]),i=new google.maps.Marker({position:r,map:map,title:Cragbook.areaList[e].name});a='<div><a href="area.php?areaid='+Cragbook.areaList[e].areaid+'"><b><h3>'+Cragbook.areaList[e].name+"</h3></b></a></div>",a+="<div>"+Cragbook.areaList[e].description+"</div>",i.info=a,i.addListener("click",function(){infowindow.setContent(this.info),infowindow.open(map,this)})}}function setAreaMap(e){if(""===e)var a=defaultCenter,t=5;else{e=e.split(",");var a=new google.maps.LatLng(e[0],e[1]),t=10}var o=$("#map").get(0);map=new google.maps.Map(o,{zoom:t,center:a,scrollwheel:!1,mapTypeId:google.maps.MapTypeId.TERRAIN}),map.addListener("center_changed",function(){var e=map.getCenter();$("#latlng").val(e.lat()+","+e.lng())})}function setCragMap(e){if(""===e)var a=defaultCenter,t=5;else{e=e.split(",");var a=new google.maps.LatLng(e[0],e[1]),t=12}var o=$("#map").get(0);map=new google.maps.Map(o,{zoom:t,center:a,scrollwheel:!1,mapTypeId:google.maps.MapTypeId.TERRAIN}),marker=""!==e?new google.maps.Marker({position:a,map:map}):null,map.addListener("rightclick",function(e){null!==marker&&marker.setMap(null),marker=new google.maps.Marker({position:e.latLng,map:map}),map.panTo(e.latLng),$("#latlng").val(e.latLng.lat()+","+e.latLng.lng())})}function viewCragDownloads(){$(btn).removeClass("btn-border"),$("#photoview").addClass("btn-border"),btn="#photoview"}function viewAreaDownloads(){$(btn).removeClass("btn-border"),$("#photoview").addClass("btn-border"),btn="#photoview"}function printRoutes(e){var a,t,o;a=window.open(),o='<!DOCTYPE html><html><head><meta charset="UTF-8">',o+="<title>Print</title>",o+='<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>',o+='<script src="https://maps.googleapis.com/maps/api/js?key=<?= $googlemaps_apikey ?>"></script>',o+='<script src="include/js/functions.js"></script>',o+='<link rel="stylesheet" href="css/cragbook.css">',o+='<link rel="stylesheet" href="css/font-awesome/css/font-awesome.min.css">',o+="</head><body>",t=$("<h6>").text("Great Western Rock"),"area"==e?(t.append($("<p>").append($("<h2>").text(Cragbook.area.name))),t.append($("<p>").append($("<h4>").text(Cragbook.area.description))),t.append($("<p>").append($("<h4>").text("Routes")))):"crag"==e?(t.append($("<p>").append($("<h2>").text(Cragbook.crag.name))),t.append($("<p>").append($("#view").html())),t.append($("<p>").append($("<h4>").text("Routes")))):"search"==e&&(t.append($("<p>").append($("<h2>").text("Search Results"))),t.append($("<p>").append($("#searchoptions").html()))),a.document.write(o),a.document.write(t.html()),a.document.write($("#routes").html()),a.document.write("</body><script>window.print();window.close();</script></html>")}function getSearch(){var e,a,t,o="include/search_json.php",r=$("#area").val(),i=$("#crag").val(),n=$("#route").val(),s=$("#grade").val();return""===r||r.match(/^[0-9a-zA-Z ]+$/)?""===i||i.match(/^[0-9a-zA-Z ]+$/)?""===n||n.match(/^[0-9a-zA-Z ]+$/)?""===s||s.match(/^[0-9a-zA-Z \+\-]+$/)?""==r&&""==i&&""==n&&""==s?void $("#error").html($("<div>").addClass("red").text("Please enter at least one search item.")):(t=$("<div>"),t.append($("<i>").addClass("fa fa-search btn btn-border").click(showSearchForm)),t.append($("<i>").addClass("fa fa-print btn btn-border").attr("onclick","printRoutes('search')")),$("#searchform").html(t),t=$("<div>").addClass("center"),t.append($("<i>").addClass("fa fa-circle-o-notch fa-spin fa-5x")),$("#searchresults").html(t),a={area:r,crag:i,route:n,grade:s},e="search="+encodeURIComponent(JSON.stringify(a)),void $.post(o,e,function(e,t,o){Cragbook.routes=new Cragbook.RouteList(JSON.parse(e)),$.getJSON("include/crag_json.php",function(e){Cragbook.cragList=e;for(x in Cragbook.routes.all)for(y in Cragbook.cragList)Cragbook.cragList[y].cragid==Cragbook.routes.all[x].cragid&&(Cragbook.routes.all[x].cragName=Cragbook.cragList[y].name);showSearchResults(a)})})):void $("#error").html($("<div>").addClass("red").text("Invalid input for grade. Must only contain letters, numbers and +/-.")):void $("#error").html($("<div>").addClass("red").text("Invalid input for route. Must only contain letters or numbers.")):void $("#error").html($("<div>").addClass("red").text("Invalid input for crag. Must only contain letters or numbers.")):void $("#error").html($("<div>").addClass("red").text("Invalid input for area. Must only contain letters or numbers."))}function showSearchForm(){var e=$("<div>");e.append($("<div>").addClass("heading").text("Search for routes")),e.append($("<input>").attr("type","text").attr("id","area").attr("placeholder","Area...")),e.append($("<input>").attr("type","text").attr("id","crag").attr("placeholder","Crag...")),e.append($("<input>").attr("type","text").attr("id","route").attr("placeholder","Route...")),e.append($("<input>").attr("type","text").attr("id","grade").attr("placeholder","Grade...")),e.append($("<button>").addClass("btn-edit").click(getSearch).text("Search")),e.append($("<div>").attr("id","error")),$("#searchform").addClass("panel").html(e)}function showSearchResults(e){var a=$("<div>");""==e.area&&(e.area="None"),""==e.crag&&(e.crag="None"),""==e.route&&(e.route="None"),""==e.grade&&(e.grade="None"),a.append($("<div>").addClass("heading").text("Search Results").append($("<p>").attr("id","searchoptions").text("Area: "+e.area+" / Crag: "+e.crag+" / Route: "+e.route+" / Grade: "+e.grade))),a.append($("<div>").attr("id","gradefilter").html(gradeFilter("area"))),a.append($("<div>").addClass("panel").attr("id","routes")),a.append($("<div>").addClass("modal").attr("id","modal")),$("#searchresults").addClass("panel").html(a),viewAreaRoutes(Cragbook.routes.getAllRoutes())}function allRoutesFilter(e){viewRoutes(e,Cragbook.routes.getAllRoutes()),$("#filter").hide()}function tradRoutesFilter(e){var a;a=$("<div>"),a.append($("<button>").addClass("btn").attr("onclick","viewRoutes('"+e+"', Cragbook.routes.gradeFilter('M'))").text("M")),a.append($("<button>").addClass("btn").attr("onclick","viewRoutes('"+e+"', Cragbook.routes.gradeFilter('D'))").text("D")),a.append($("<button>").addClass("btn").attr("onclick","viewRoutes('"+e+"', Cragbook.routes.gradeFilter('VD'))").text("VD")),a.append($("<button>").addClass("btn").attr("onclick","viewRoutes('"+e+"', Cragbook.routes.gradeFilter('S'))").text("S")),a.append($("<button>").addClass("btn").attr("onclick","viewRoutes('"+e+"', Cragbook.routes.gradeFilter('VS'))").text("VS")),a.append($("<button>").addClass("btn").attr("onclick","viewRoutes('"+e+"', Cragbook.routes.gradeFilter('HVS'))").text("HVS")),a.append($("<button>").addClass("btn").attr("onclick","viewRoutes('"+e+"', Cragbook.routes.gradeFilter('E'))").text("Extreme")),viewRoutes(e,Cragbook.routes.getTradRoutes()),$("#filter").html(a).show()}function sportRoutesFilter(e){var a;a=$("<div>"),a.append($("<button>").addClass("btn").attr("onclick","viewRoutes('"+e+"', Cragbook.routes.gradeFilter('F1'))").text("F1")),a.append($("<button>").addClass("btn").attr("onclick","viewRoutes('"+e+"', Cragbook.routes.gradeFilter('F2'))").text("F2")),a.append($("<button>").addClass("btn").attr("onclick","viewRoutes('"+e+"', Cragbook.routes.gradeFilter('F3'))").text("F3")),a.append($("<button>").addClass("btn").attr("onclick","viewRoutes('"+e+"', Cragbook.routes.gradeFilter('F4'))").text("F4")),a.append($("<button>").addClass("btn").attr("onclick","viewRoutes('"+e+"', Cragbook.routes.gradeFilter('F5'))").text("F5")),a.append($("<button>").addClass("btn").attr("onclick","viewRoutes('"+e+"', Cragbook.routes.gradeFilter('F6'))").text("F6")),a.append($("<button>").addClass("btn").attr("onclick","viewRoutes('"+e+"', Cragbook.routes.gradeFilter('F7'))").text("F7")),a.append($("<button>").addClass("btn").attr("onclick","viewRoutes('"+e+"', Cragbook.routes.gradeFilter('F8'))").text("F8")),a.append($("<button>").addClass("btn").attr("onclick","viewRoutes('"+e+"', Cragbook.routes.gradeFilter('F9'))").text("F9")),viewRoutes(e,Cragbook.routes.getSportRoutes()),$("#filter").html(a).show()}function boulderProblemsFilter(e){var a;a=$("<div>"),a.append($("<button>").addClass("btn").attr("onclick","viewRoutes('"+e+"', Cragbook.routes.gradeFilter('f1'))").text("f1")),a.append($("<button>").addClass("btn").attr("onclick","viewRoutes('"+e+"', Cragbook.routes.gradeFilter('f2'))").text("f2")),a.append($("<button>").addClass("btn").attr("onclick","viewRoutes('"+e+"', Cragbook.routes.gradeFilter('f3'))").text("f3")),a.append($("<button>").addClass("btn").attr("onclick","viewRoutes('"+e+"', Cragbook.routes.gradeFilter('f4'))").text("f4")),a.append($("<button>").addClass("btn").attr("onclick","viewRoutes('"+e+"', Cragbook.routes.gradeFilter('f5'))").text("f5")),a.append($("<button>").addClass("btn").attr("onclick","viewRoutes('"+e+"', Cragbook.routes.gradeFilter('f6'))").text("f6")),a.append($("<button>").addClass("btn").attr("onclick","viewRoutes('"+e+"', Cragbook.routes.gradeFilter('f7'))").text("f7")),a.append($("<button>").addClass("btn").attr("onclick","viewRoutes('"+e+"', Cragbook.routes.gradeFilter('f8'))").text("f8")),a.append($("<button>").addClass("btn").attr("onclick","viewRoutes('"+e+"', Cragbook.routes.gradeFilter('f9'))").text("f9")),viewRoutes(e,Cragbook.routes.getBoulderProblems()),$("#filter").html(a).show()}function gradeFilter(e){var a,t,o,r,i,n;return a=$("<div>"),t=$("<button>").addClass("btn").attr("onclick","allRoutesFilter('"+e+"')").text("All"),o=$("<button>").addClass("btn").attr("onclick","tradRoutesFilter('"+e+"')").html('<i class="fa fa-circle-o"></i> Trad'),r=$("<button>").addClass("btn").attr("onclick","sportRoutesFilter('"+e+"')").html('<i class="fa fa-circle yellow"></i> Sport'),i=$("<button>").addClass("btn").attr("onclick","boulderProblemsFilter('"+e+"')").html('<i class="fa fa-circle"></i> Bouldering'),n=$("<div>").attr("id","filter"),a.append(t),a.append(o),a.append(r),a.append(i),a.append(n),a}var map,marker,btn;const defaultCenter={lat:51.4490382,lng:-2.5943542};var infowindow=new google.maps.InfoWindow;